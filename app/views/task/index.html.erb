<%= button_to ta_t("btn.new"), new_task_path, method: :get, class: "btn m-2 btn-primary" %>
<div class="row mb-2">
  <%= search_form_for @q, url: task_index_path do |f| %>
    <%= f.search_field :title_cont, placeholder: ta_t("search.form.title") %>
    <%= f.select :status_eq, Task.statuses_i18n.invert.map {|k, v| [k, Task.statuses[v]]} %>
    <%= f.submit ta_t("search.form.submit") %>
  <% end %>
</div>
<div class="row mb-2">
  <table class="table table-bordere table-striped table-hover table-responsive align-middle">
    <thead class="table-light">
      <tr class="text-center">
        <th scope="col" class="w-no"><%= sort_link(@q, :id, "#")%></th>
        <th scope="col" class="w-date"><%= sort_link(@q, :created_at, ta_t("results.header.created_at"))%></th>
        <th scope="col"><%= sort_link(@q, :title, ta_t("results.header.title")) %></th>
        <th scope="col" class="w-status"><%= sort_link(@q, :status, ta_t("results.header.status")) %></th>
        <th scope="col" class="w-date"><%= sort_link(@q, :ended_at, ta_t("results.header.ended_at")) %></th>
        <th scope="col" class="w-button"><%= ta_t("results.header.action") %></th>
      </tr>
    </thead>
    <tbody>
      <% @results.each do |r| %>
      <tr>
        <td class="text-center"><%= r.id %></td>
        <td><%= l(r.created_at) %></td>
        <td><%= link_to r.title, task_path(r.id) %></td>
        <td class="text-center"><%= I18n.t("enums.task.status.#{r.status}") %></td>
        <td class="text-center"><%= l(r.ended_at, default: "-") %></td>
        <td class="text-center">
        <div class="d-flex justify-content-center">
          <%= button_to ta_t("results.body.btn.edit"), edit_task_path(r.id), method: :get, class: "btn m-1 btn-danger" %>
          <%= button_to ta_t("results.body.btn.destroy"), task_path(r.id), method: :delete, class: "btn m-1 btn-danger" %>
        </div>
        </td>
      </tr>
      <% end %>
    </tbody>
  </table>
</div>
<%= paginate @results, theme: 'bootstrap-5' %>
<%= render partial: 'layouts/flash' %>